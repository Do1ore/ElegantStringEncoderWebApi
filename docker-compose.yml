version: '3.4'

services:
  elegantstringencoderwebapi:
    image: ${DOCKER_REGISTRY-}elegantstringencoderwebapi:dev
    build:
      context: .
      dockerfile: Api/Dockerfile
    ports:
     - "7286:80"
    networks:
     - hyperlink
    environment:
     - ASPNETCORE_ENVIRONMENT=Development
     - ASPNETCORE_URLS=https://+:80

  angular-app:
    image: ${DOCKER_REGISTRY-}angular-app:latest
    ports:
     - "4200:80"
    depends_on:
     - elegantstringencoderwebapi
    networks:
     - hyperlink
    environment:
      - BASIC_AUTH_USERNAME=admin
      - BASIC_AUTH_PASSWORD=admin
      - PROXY_PASS=http://web/

networks:
    hyperlink:
       driver: bridge